<html>
<head>
<title>hi</title>
</head>
<body>
	<div id="messages"></div>
	<input type="text" value="Say anything">
	<div id="submit" style="background-color: #b0c4de; height: 200px; width: 200px;"></div>
	<script src="http://localhost:8000/socket.io/socket.io.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script>
$(document).ready(function() {
	socket = io.connect("http://localhost:8000", {transports: ["websocket"]});

	socket.on("connect", onSocketConnection);

	function onSocketConnection() {
		console.log("Connection established.");
		setEventHandlers();
	};

	function setEventHandlers() {
		socket.on("echo", function(message) {
			console.log(message.text);
			socket.emit("echo", {text:"Hello world"});
		});
	
		$("#submit").click(sendMessage);
	};

	function sendMessage(message) {
		console.log("clicked");
		//socket.emit("message", {sender:socket.id, message:$("text").value});
		//socket.emit("echo", {nothing:null});
	};
});

$(window).on('beforeunload', function(){
    socket.close();
});
/*
		//on submit button click
		button = $("#submit");
		button.click( function() {
			text = $("text").value;
			socket.emit("message", {text:text});
			console.log("click");
		});

		//on incoming message
		socket.on("message", function(message) {
			display(message.text);
		});
*/
	</script>
</body>
</html>
